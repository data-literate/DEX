# ---------------------------------------------------------------
# PROD overlay â€” Production configuration.
# 3 replicas, warn-level logging, higher resource limits.
# Only SHA tags validated in stage are promoted here.
# ---------------------------------------------------------------
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: dex-prod

resources:
  - ../../base

replicas:
  - name: dex
    count: 3                # Higher replica count for production traffic

images:
  - name: thedataenginex/dex
    newName: ghcr.io/thedataenginex/dex
    newTag: sha-03216e24    # Same SHA promoted from stage

patches:
  - path: deployment.yaml
