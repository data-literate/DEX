# ---------------------------------------------------------------
# DataEngineX API â€” ClusterIP Service
# Internal-only service that fronts the dex Deployment.
# External access is handled by the Ingress resource.
# ---------------------------------------------------------------
apiVersion: v1
kind: Service
metadata:
  name: dex
  labels:
    app: dex
spec:
  type: ClusterIP               # Cluster-internal only; Ingress handles external
  ports:
  - port: 8000                  # Service port
    targetPort: 8000            # Must match containerPort in Deployment
    protocol: TCP
    name: http
  selector:
    app: dex                    # Routes to pods with label app=dex
